# ğŸ§© F-Front 3.4 â€” Purchase Intent / Quote Request

## ğŸ¯ Objetivo

Permitir que o usuÃ¡rio em **contexto Farmer** manifeste **intenÃ§Ã£o de compra ou solicitaÃ§Ã£o de cotaÃ§Ã£o** para uma oferta especÃ­fica do marketplace, criando o primeiro **gesto comercial ativo** da plataforma, sem ainda envolver pedido, pagamento ou reserva de estoque.

Esta feature conecta **descoberta â†’ aÃ§Ã£o**, preparando o usuÃ¡rio para o fluxo transacional das fases seguintes.

---

## ğŸ§  Contexto

AtÃ© a F-Front 3.3, o Farmer jÃ¡ consegue:

* Navegar pelo marketplace
* Visualizar detalhes de produtos
* Comparar ofertas entre Sellers

Entretanto, o sistema ainda Ã© **passivo**: o Farmer nÃ£o consegue agir sobre uma oferta.

A F-Front 3.4 introduz a possibilidade de:

* â€œTenho interesse nesse produtoâ€
* â€œQuero solicitar cotaÃ§Ã£oâ€
* â€œQuero X unidades desse itemâ€

Sem criar compromisso financeiro imediato.

---

## ğŸ“¦ Escopo

### ğŸ“Œ Rotas

Adicionar as seguintes rotas:

* `/marketplace/products/:productId/intent`
* `/farmer/purchase-intents`

Todas as rotas:

* Exigem autenticaÃ§Ã£o
* Exigem organizaÃ§Ã£o ativa do tipo **Farm**

---

### ğŸ–¥ï¸ Telas e Componentes

---

### 1ï¸âƒ£ PurchaseIntentCreatePage

*(A partir do detalhe do produto / oferta)*

**Responsabilidade:**
Permitir que o Farmer crie uma **intenÃ§Ã£o de compra** para uma oferta especÃ­fica.

#### Acesso

* CTA a partir da **MarketplaceProductDetailPage**:

  * BotÃ£o: â€œSolicitar cotaÃ§Ã£oâ€ / â€œTenho interesseâ€

---

#### Campos do FormulÃ¡rio

* Produto (readonly)
* Seller (readonly)
* Quantidade desejada
* ObservaÃ§Ãµes (opcional)

---

#### Comportamento

* ValidaÃ§Ã£o de quantidade (> 0)
* SubmissÃ£o cria uma nova intenÃ§Ã£o
* Feedback visual de sucesso
* Redirecionamento opcional para â€œMinhas solicitaÃ§Ãµesâ€

---

### 2ï¸âƒ£ FarmerPurchaseIntentListPage

*(Minhas solicitaÃ§Ãµes)*

**Responsabilidade:**
Exibir todas as intenÃ§Ãµes de compra criadas pelo Farmer.

---

#### Elementos da UI

* Lista/tabela com:

  * Produto
  * Seller
  * Quantidade
  * Status (Pendente, Aceita, Rejeitada, Expirada)
  * Data da solicitaÃ§Ã£o
* OrdenaÃ§Ã£o por data (mais recente primeiro)

---

#### Estados Esperados

* Loading inicial
* Estado vazio (â€œVocÃª ainda nÃ£o possui solicitaÃ§Ãµesâ€)
* Erro de carregamento

---

### ğŸ”Œ IntegraÃ§Ã£o com Backend

#### Endpoints Consumidos

* `POST /api/purchase-intents`
* `GET /api/farmers/{farmerId}/purchase-intents`

*(Endpoints de atualizaÃ§Ã£o de status pelo Seller nÃ£o fazem parte do frontend Farmer nesta fase)*

---

### ğŸ¨ UX / UI Guidelines

* CTA de â€œSolicitar cotaÃ§Ã£oâ€ deve ser claro, mas nÃ£o agressivo
* Estados de status devem usar cores consistentes:

  * Pendente â†’ neutro
  * Aceita â†’ sucesso
  * Rejeitada â†’ erro
  * Expirada â†’ aviso
* Feedback imediato apÃ³s criaÃ§Ã£o da intenÃ§Ã£o
* Evitar qualquer linguagem de â€œcompra finalizadaâ€

---

## ğŸš« Fora de Escopo

* ConversÃ£o automÃ¡tica em pedido
* Carrinho
* Pagamento
* Reserva de estoque
* Chat Farmer â†” Seller
* Upload de documentos (receita agronÃ´mica)

---

## âœ… CritÃ©rios de Aceite

* Farmer consegue criar uma intenÃ§Ã£o de compra
* IntenÃ§Ã£o Ã© associada corretamente ao produto e Seller
* Lista de intenÃ§Ãµes exibe dados corretos
* Status Ã© exibido corretamente
* Erros de validaÃ§Ã£o sÃ£o tratados e exibidos
* Nenhuma aÃ§Ã£o financeira ocorre
* NavegaÃ§Ã£o integrada ao layout e menu do sistema

---

## ğŸ§­ ObservaÃ§Ãµes TÃ©cnicas

* Feature depende diretamente de:

  * F-Front 3.3 â€” Marketplace Product Detail & Offers
  * Backend F3.4 â€” Purchase Intent / Quote Request
* Deve reutilizar:

  * `ActiveOrganizationStore`
  * Guards de autenticaÃ§Ã£o
  * Infra de erro global
* Estrutura sugerida:

  * `src/app/farmer/purchase-intents/`