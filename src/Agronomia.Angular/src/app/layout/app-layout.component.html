<div class="app-layout">
  <header class="app-topbar">
    <div class="brand">
      <div class="brand-mark" aria-hidden="true"></div>
      <div class="brand-copy">
        <span class="brand-title">Agronomia</span>
        <span class="brand-subtitle">Contexto ativo</span>
      </div>
    </div>

    <div class="context">
      <div class="context-block">
        <span class="label">Usuario</span>
        <span class="value">{{ user()?.name || user()?.email || 'Conta' }}</span>
        <span class="meta" *ngIf="user()?.name && user()?.email">{{ user()?.email }}</span>
      </div>

      <div class="context-block" *ngIf="activeOrganization() as organization; else noOrganization">
        <span class="label">Organizacao</span>
        <span class="value">{{ organization.organizationName }}</span>
        <span class="pill">{{ organization.organizationType }}</span>
      </div>

      <ng-template #noOrganization>
        <div class="context-block">
          <span class="label">Organizacao</span>
          <span class="value">Sem contexto ativo</span>
        </div>
      </ng-template>
    </div>

    <div class="actions">
      <button type="button" class="btn ghost" (click)="onChangeOrganization()">
        Trocar organizacao
      </button>
      <button type="button" class="btn solid" (click)="onLogout()">
        Sair
      </button>
    </div>
  </header>

  <div class="app-shell">
    <aside class="app-nav">
      <div class="nav-heading">Navegacao</div>

      <ng-container *ngFor="let section of navSections(); let sectionIndex = index">
        <div class="nav-section" [style.--section-index]="sectionIndex">
          <div class="nav-title">{{ section.title }}</div>
          <a
            *ngFor="let item of section.items; let itemIndex = index"
            class="nav-link"
            [style.--item-index]="itemIndex"
            [routerLink]="item.route"
            routerLinkActive="is-active"
            [routerLinkActiveOptions]="{ exact: item.exact }"
          >
            <span class="nav-label">{{ item.label }}</span>
          </a>
        </div>
      </ng-container>

      <div class="nav-empty" *ngIf="navSections().length === 0">
        Nenhuma opcao disponivel.
      </div>
    </aside>

    <main class="app-content">
      <router-outlet></router-outlet>
    </main>
  </div>
</div>
