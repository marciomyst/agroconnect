<section class="marketplace-detail">
  <div class="state" *ngIf="errorMessage()">{{ errorMessage() }}</div>
  <div class="state" *ngIf="isLoading()">Loading product...</div>

  <ng-container *ngIf="product() as product">
    <header class="page-header">
      <div>
        <p class="eyebrow">Marketplace</p>
        <h1>{{ product.name }}</h1>
        <p class="subtitle">{{ product.category }} Â· {{ product.unitOfMeasure }}</p>
      </div>
      <span class="badge recipe" *ngIf="product.isControlledByRecipe">Controlled</span>
    </header>

    <div class="offers">
      <h2>Available offers</h2>
      <p class="subtitle">Compare vendedores e solicite uma cotacao.</p>

      <div class="state" *ngIf="offers().length === 0">
        No offers available for this product.
      </div>

      <div class="offer-card" *ngFor="let offer of offers()">
        <div>
          <h3>{{ offer.sellerName }}</h3>
          <p class="meta">BRL {{ offer.price | number: '1.2-2' }}</p>
        </div>
        <a
          class="btn primary"
          [routerLink]="['/farmer/marketplace/products', product.productId, 'intent']"
          [queryParams]="{ sellerProductId: offer.sellerProductId }"
          [state]="{ productName: product.name, sellerName: offer.sellerName }"
        >
          Request quote
        </a>
      </div>
    </div>
  </ng-container>
</section>
